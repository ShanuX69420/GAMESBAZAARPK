<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pakistani Gaming Marketplace - Admin Panel</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; padding: 0; background: #f8f9fa; 
        }
        .header { 
            background: #343a40; color: white; padding: 1rem 2rem; 
            border-bottom: 3px solid #007bff;
        }
        .header h1 { margin: 0; font-size: 1.5rem; }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        
        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            margin-bottom: 2rem;
            border-bottom: 2px solid #dee2e6;
        }
        .nav-tab {
            padding: 1rem 2rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: #495057;
            transition: all 0.2s;
        }
        .nav-tab:hover {
            color: #007bff;
            border-bottom-color: #007bff;
        }
        .nav-tab.active {
            color: #007bff;
            border-bottom-color: #007bff;
        }
        
        /* Content Sections */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        
        /* Action Buttons */
        .actions {
            margin-bottom: 2rem;
        }
        .btn { 
            display: inline-block; 
            padding: 0.5rem 1rem; 
            background: #007bff; 
            color: white; 
            text-decoration: none; 
            border-radius: 4px; 
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            margin-right: 0.5rem;
            transition: background 0.2s;
        }
        .btn:hover { background: #0056b3; }
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #218838; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }
        .btn-secondary { background: #6c757d; }
        .btn-secondary:hover { background: #545b62; }
        .btn-small {
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
        }
        
        /* Data Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .data-table th,
        .data-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }
        .data-table tbody tr:hover {
            background: #f8f9fa;
        }
        
        /* Badges */
        .badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .badge-admin { background: #dc3545; color: white; }
        .badge-seller { background: #ffc107; color: #212529; }
        .badge-user { background: #6c757d; color: white; }
        .badge-active { background: #28a745; color: white; }
        .badge-sold { background: #6c757d; color: white; }
        .badge-paused { background: #ffc107; color: #212529; }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #dee2e6;
        }
        .modal-header h3 {
            margin: 0;
        }
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6c757d;
        }
        .close-btn:hover {
            color: #495057;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }
        .form-control {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        select.form-control {
            height: auto;
        }
        textarea.form-control {
            resize: vertical;
            min-height: 80px;
        }
        
        /* Loading states */
        .loading { 
            text-align: center; 
            padding: 2rem; 
            color: #6c757d; 
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Alerts */
        .alert {
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .alert-success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .alert-danger {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stat-card h3 {
            margin: 0 0 0.5rem 0;
            color: #007bff;
            font-size: 2rem;
        }
        .stat-card p {
            margin: 0;
            color: #6c757d;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            .nav-tabs {
                overflow-x: auto;
            }
            .nav-tab {
                white-space: nowrap;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè™ Pakistani Gaming Marketplace - Admin Panel</h1>
    </div>
    
    <div class="container">
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="nav-tab" onclick="showTab('users')">üë• Users</button>
            <button class="nav-tab" onclick="showTab('games')">üéÆ Games</button>
            <button class="nav-tab" onclick="showTab('categories')">üè∑Ô∏è Categories</button>
            <button class="nav-tab" onclick="showTab('listings')">üõí Listings</button>
        </div>
        
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="stats-users">-</h3>
                    <p>Total Users</p>
                </div>
                <div class="stat-card">
                    <h3 id="stats-games">-</h3>
                    <p>Games</p>
                </div>
                <div class="stat-card">
                    <h3 id="stats-listings">-</h3>
                    <p>Active Listings</p>
                </div>
                <div class="stat-card">
                    <h3 id="stats-categories">-</h3>
                    <p>Categories</p>
                </div>
            </div>
        </div>
        
        <!-- Users Tab -->
        <div id="users" class="tab-content">
            <div class="actions">
                <button class="btn btn-success" onclick="showCreateUserForm()">‚ûï Add New User</button>
            </div>
            <div id="users-content">
                <div class="loading">Loading users...</div>
            </div>
        </div>
        
        <!-- Games Tab -->
        <div id="games" class="tab-content">
            <div class="actions">
                <button class="btn btn-success" onclick="showCreateGameForm()">‚ûï Add New Game</button>
                <button class="btn btn-secondary" onclick="loadGames(1, 100)">üìã Show All Games</button>
                <button class="btn btn-secondary" onclick="loadGames(1, 20)">üìÑ Show Pages (20)</button>
            </div>
            <div id="games-content">
                <div class="loading">Loading games...</div>
            </div>
        </div>
        
        <!-- Categories Tab -->
        <div id="categories" class="tab-content">
            <div class="actions">
                <button class="btn btn-success" onclick="showCreateCategoryForm()">‚ûï Add New Category</button>
            </div>
            <div id="categories-content">
                <div class="loading">Loading categories...</div>
            </div>
        </div>
        
        <!-- Listings Tab -->
        <div id="listings" class="tab-content">
            <div id="listings-content">
                <div class="loading">Loading listings...</div>
            </div>
        </div>
    </div>
    
    <!-- Create/Edit User Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Add New User</h3>
                <button class="close-btn" onclick="closeModal('userModal')">&times;</button>
            </div>
            <form id="userForm">
                <div class="form-group">
                    <label>Username *</label>
                    <input type="text" name="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" name="email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" name="name" class="form-control">
                </div>
                <div class="form-group">
                    <label>Role *</label>
                    <select name="role" class="form-control" required>
                        <option value="USER">User</option>
                        <option value="SELLER">Seller</option>
                        <option value="ADMIN">Admin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="text" name="phoneNumber" class="form-control">
                </div>
                <div class="form-group">
                    <label>City</label>
                    <input type="text" name="city" class="form-control">
                </div>
                <div class="actions">
                    <button type="submit" class="btn btn-success">Save User</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('userModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Create/Edit Game Modal -->
    <div id="gameModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="gameModalTitle">Add New Game</h3>
                <button class="close-btn" onclick="closeModal('gameModal')">&times;</button>
            </div>
            <form id="gameForm">
                <div class="form-group">
                    <label>Game Name *</label>
                    <input type="text" name="name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Slug *</label>
                    <input type="text" name="slug" class="form-control" required placeholder="e.g., counter-strike-2">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" class="form-control" placeholder="Brief description of the game"></textarea>
                </div>
                <div class="form-group">
                    <label>Image URL</label>
                    <input type="url" name="image" class="form-control" placeholder="https://example.com/image.jpg">
                </div>
                <div class="actions">
                    <button type="submit" class="btn btn-success">Save Game</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('gameModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Create/Edit Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Add New Category</h3>
                <button class="close-btn" onclick="closeModal('categoryModal')">&times;</button>
            </div>
            <form id="categoryForm">
                <div class="form-group">
                    <label>Category Name *</label>
                    <input type="text" name="name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Slug *</label>
                    <input type="text" name="slug" class="form-control" required placeholder="e.g., game-keys">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" class="form-control" placeholder="Brief description of the category"></textarea>
                </div>
                <div class="form-group">
                    <label>Icon</label>
                    <input type="text" name="icon" class="form-control" placeholder="e.g., üîë or üéÆ">
                </div>
                <div class="actions">
                    <button type="submit" class="btn btn-success">Save Category</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('categoryModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Action</h3>
                <button class="close-btn" onclick="closeModal('confirmModal')">&times;</button>
            </div>
            <p id="confirmMessage">Are you sure you want to proceed?</p>
            <div class="actions">
                <button id="confirmBtn" class="btn btn-danger">Confirm</button>
                <button class="btn btn-secondary" onclick="closeModal('confirmModal')">Cancel</button>
            </div>
        </div>
    </div>
    
    <script src="/admin/admin-script.js"></script>
</body>
</html>`